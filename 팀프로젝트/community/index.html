<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ê³µì‹í™ˆí˜ì´ì§€ â€“ ì»¤ë®¤ë‹ˆí‹°</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="upmenu"></div>
    <section class="hero">
      <div class="container">
        <div class="title">ì»¤ë®¤ë‹ˆí‹°</div>
        <div class="sub">í•¨ê»˜ ë¬»ê³  ë‹µí•˜ë©° ì„±ì¥í•˜ëŠ” ê³µê°„</div>

        <div class="hero-row">
          <div class="chip">ğŸ”¥ ì˜¤ëŠ˜ì˜ ì¸ê¸°ê¸€</div>
          <div class="chip">âœ¨ ìƒˆë¡œ ì˜¬ë¼ì˜¨ ê¸€</div>
          <div class="chip">ğŸ“Œ ê³µì§€ í™•ì¸</div>
        </div>
      </div>
    </section>

    <!-- Community Main -->
    <main class="community">
      <div class="container grid">
        <!-- Sidebar -->
        <aside class="side">
          <h4>ì¹´í…Œê³ ë¦¬</h4>
          <nav class="catlist" aria-label="ì»¤ë®¤ë‹ˆí‹° ì¹´í…Œê³ ë¦¬">
            <a href="#"
              ><span>ììœ ê²Œì‹œíŒ</span><span class="badge">128</span></a
            >
            <a href="#"><span>Q&amp;A</span><span class="badge">64</span></a>
            <a href="#"><span>ìë£Œì‹¤</span><span class="badge">23</span></a>
            <a href="#"><span>ê³µì§€ì‚¬í•­</span><span class="badge">5</span></a>
            <a href="#"
              ><span>ë¬¸ì˜ ê²Œì‹œíŒ</span><span class="badge">12</span></a
            >
            <a href="#"><span>ìˆ˜ê°• í›„ê¸°</span><span class="badge">41</span></a>
            <a href="#"><span>ê°•ì‚¬ í›„ê¸°</span><span class="badge">9</span></a>
            <a href="#"
              ><span>í”„ë¡œê·¸ë¨ ë‹¤ìš´ë¡œë“œ</span><span class="badge">7</span></a
            >
          </nav>

          <div class="tools">
            <div class="search" role="search">
              <input
                type="search"
                placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                aria-label="ì»¤ë®¤ë‹ˆí‹° ê²€ìƒ‰"
              />
              <button class="btn" type="button">ê²€ìƒ‰</button>
            </div>
            <button class="btn brand" type="button">+ ê¸€ ì“°ê¸°</button>
          </div>
        </aside>

        <!-- Content Column -->
        <div class="content-col">
          <!-- Notice -->
          <div class="notice" role="note" aria-label="ê³µì§€">
            <div class="mark">N</div>
            <div>
              <strong>ìƒˆ í•™ê¸°/ëª¨ì§‘ ì¼ì • ì•ˆë‚´</strong>
              <div
                class="submeta"
                style="color: var(--muted); font-size: 0.92rem"
              >
                ê³µì§€ì‚¬í•­ Â· 2025-09-01
              </div>
            </div>
          </div>

          <!-- Tabs -->
          <div class="tabs" role="tablist" aria-label="ë³´ê¸° í•„í„°">
            <a class="tab active" role="tab" aria-selected="true" href="#"
              >ì „ì²´</a
            >
            <a class="tab" role="tab" href="#">ê³µì§€</a>
            <a class="tab" role="tab" href="#">Q&amp;A</a>
            <a class="tab" role="tab" href="#">ììœ </a>
            <a class="tab" role="tab" href="#">ìë£Œì‹¤</a>
          </div>

          <!-- Category Cards -->
          <div class="cards" aria-label="ë°”ë¡œê°€ê¸°">
            <article class="card">
              <div class="meta">ğŸ“Œ ê³µì§€ì‚¬í•­</div>
              <div class="title"><a href="#">ìš´ì˜ ì •ì±… ë° ì—í‹°ì¼“</a></div>
              <div class="excerpt">
                ì›í™œí•œ ì»¤ë®¤ë‹ˆí‹° ìš´ì˜ì„ ìœ„í•œ ê°€ì´ë“œë¼ì¸ì„ í™•ì¸í•˜ì„¸ìš”.
              </div>
            </article>
            <article class="card">
              <div class="meta">â“ Q&amp;A</div>
              <div class="title">
                <a href="#">ìŠ¤í”„ë§ ì˜ì¡´ì„± ì£¼ì…ì´ ì˜ ì•ˆë¼ìš”</a>
              </div>
              <div class="excerpt">
                @Autowiredì™€ ìƒì„±ì ì£¼ì… ì°¨ì´ì™€ ì„¤ì • íŒ ì •ë¦¬.
              </div>
            </article>
            <article class="card">
              <div class="meta">ğŸ’¬ ììœ ê²Œì‹œíŒ</div>
              <div class="title"><a href="#">ìŠ¤í„°ë”” ëª¨ì§‘(ëŒ€ì „/ì£¼ë§)</a></div>
              <div class="excerpt">
                SQLÂ·ìë£Œêµ¬ì¡° ì¤‘ì‹¬ ì˜¤í”„ë¼ì¸ ìŠ¤í„°ë”” íŒ€ì› êµ¬í•©ë‹ˆë‹¤.
              </div>
            </article>
            <article class="card">
              <div class="meta">ğŸ“š ìë£Œì‹¤</div>
              <div class="title"><a href="#">JSP/Servlet ìƒ˜í”Œ í”„ë¡œì íŠ¸</a></div>
              <div class="excerpt">
                ë¡œì»¬ì—ì„œ ë°”ë¡œ ëŒë¦´ ìˆ˜ ìˆëŠ” í…œí”Œë¦¿ê³¼ ë¬¸ì„œ í¬í•¨.
              </div>
            </article>
          </div>

          <!-- Feed -->
          <section class="feed" aria-label="ìµœì‹  ê¸€">
            <article class="post">
              <div class="headline">
                <span class="pill">Q&amp;A</span>
                <a class="title" href="#">MySQL íŠ¸ë¦¬ê±° ì—ëŸ¬(1442) í•´ê²°</a>
              </div>
              <div class="submeta">ì˜¤ëŠ˜ Â· ëŒ“ê¸€ 5 Â· ì¡°íšŒ 132</div>
            </article>
            <article class="post">
              <div class="headline">
                <span class="pill">ììœ </span>
                <a class="title" href="#">í¬íŠ¸í´ë¦¬ì˜¤ ë©”ì¸ ìƒ‰ ë­ê°€ ì¢‹ì„ê¹Œ?</a>
              </div>
              <div class="submeta">ì–´ì œ Â· ëŒ“ê¸€ 12 Â· ì¡°íšŒ 409</div>
            </article>
            <article class="post">
              <div class="headline">
                <span class="pill">ìë£Œì‹¤</span>
                <a class="title" href="#">HTTP ìƒíƒœ ì½”ë“œ ì¹˜íŠ¸ì‹œíŠ¸ PDF</a>
              </div>
              <div class="submeta">3ì¼ ì „ Â· ëŒ“ê¸€ 2 Â· ì¡°íšŒ 98</div>
            </article>

            <div class="paginate" role="navigation" aria-label="í˜ì´ì§€ë„¤ì´ì…˜">
              <a class="page" href="#">â€¹</a>
              <a class="page active" href="#">1</a>
              <a class="page" href="#">2</a>
              <a class="page" href="#">3</a>
              <a class="page" href="#">â€º</a>
            </div>
          </section>

          <div class="spacer"></div>
        </div>
      </div>
    </main>
  </body>
  <script>
    /* =========================================================
   ì»¤ë®¤ë‹ˆí‹° í”„ë¡ íŠ¸ì—”ë“œ: ê²€ìƒ‰, í•„í„°, íƒ­, í˜ì´ì§€ë„¤ì´ì…˜
   - URL ìƒíƒœ ë™ê¸°í™” (?q=&cat=&tab=&page=)
   - ì‚¬ì´ë“œ ì¹´í…Œê³ ë¦¬ ë±ƒì§€ ì¹´ìš´íŠ¸ ìë™ ê°±ì‹ 
   - ë°˜ì‘í˜•/ì ‘ê·¼ì„± ê³ ë ¤(í‚¤ë³´ë“œ í¬ì»¤ìŠ¤ ìœ ì§€)
   ========================================================= */

    document.addEventListener("DOMContentLoaded", () => {
      // ---------- ì„¤ì • ----------
      const PAGE_SIZE = 9; // í˜ì´ì§€ë‹¹ ê¸€ ìˆ˜
      const CATEGORIES = [
        "ê³µì§€ì‚¬í•­",
        "Q&A",
        "ììœ ê²Œì‹œíŒ",
        "ìë£Œì‹¤",
        "ë¬¸ì˜ ê²Œì‹œíŒ",
        "ìˆ˜ê°• í›„ê¸°",
        "ê°•ì‚¬ í›„ê¸°",
        "í”„ë¡œê·¸ë¨ ë‹¤ìš´ë¡œë“œ",
      ];
      const TAB_MAP = {
        ì „ì²´: null,
        ê³µì§€: "ê³µì§€ì‚¬í•­",
        "Q&A": "Q&A",
        ììœ : "ììœ ê²Œì‹œíŒ",
        ìë£Œì‹¤: "ìë£Œì‹¤",
      };

      // ---------- ìš”ì†Œ ì°¸ì¡° ----------
      const $side = document.querySelector(".side");
      const $catLinks = Array.from(document.querySelectorAll(".catlist a"));
      const $searchInput = $side?.querySelector(".search input[type='search']");
      const $searchBtn = $side?.querySelector(".search button");
      const $writeBtn = $side?.querySelector(".btn.brand");
      const $tabs = Array.from(document.querySelectorAll(".tabs .tab"));
      const $feed = document.querySelector(".feed");
      const $paginate = document.querySelector(".paginate");
      const $cardsQuick = Array.from(
        document.querySelectorAll(".cards .card .meta")
      );
      const $notice = document.querySelector(".notice .submeta");

      // ---------- ìƒ˜í”Œ ë°ì´í„° (ë°±ì—”ë“œ ì—°ê²° ì „ ë°ëª¨ìš©) ----------
      // ì‹¤ì œ API ì—°ê²° ì‹œ, fetchPosts()ë§Œ êµì²´í•˜ë©´ ë™ì¼ ë™ì‘
      const seedRand = (
        (seed) => () =>
          (seed = (seed * 9301 + 49297) % 233280) / 233280
      )(42);
      function randInt(a, b) {
        return Math.floor(seedRand() * (b - a + 1)) + a;
      }
      function daysAgo(n) {
        const d = new Date();
        d.setDate(d.getDate() - n);
        return d;
      }

      const mockPosts = (() => {
        const arr = [];
        const samples = [
          [
            "ìŠ¤í”„ë§ ì˜ì¡´ì„± ì£¼ì…ì´ ì˜ ì•ˆë¼ìš”",
            "Q&A",
            "@Autowiredì™€ ìƒì„±ì ì£¼ì… íŒ/ì°¨ì´",
          ],
          [
            "MySQL íŠ¸ë¦¬ê±° ì—ëŸ¬(1442) í•´ê²°",
            "Q&A",
            "ë™ì¼ í…Œì´ë¸” íŠ¸ë¦¬ê±° ì—…ë°ì´íŠ¸ ì‹œ í•´ê²°ì±…",
          ],
          [
            "HTTP ìƒíƒœ ì½”ë“œ ì¹˜íŠ¸ì‹œíŠ¸ PDF",
            "ìë£Œì‹¤",
            "ìì£¼ ì“°ëŠ” 2xx/3xx/4xx/5xx ìš”ì•½",
          ],
          [
            "ìŠ¤í„°ë”” ëª¨ì§‘(ëŒ€ì „/ì£¼ë§)",
            "ììœ ê²Œì‹œíŒ",
            "SQLÂ·ìë£Œêµ¬ì¡° ì¤‘ì‹¬ ìŠ¤í„°ë”” íŒ€ì› ëª¨ì§‘",
          ],
          ["ìš´ì˜ ì •ì±… ë° ì—í‹°ì¼“", "ê³µì§€ì‚¬í•­", "ì»¤ë®¤ë‹ˆí‹° ì´ìš© ê°€ì´ë“œë¼ì¸"],
          [
            "JSP/Servlet ìƒ˜í”Œ í”„ë¡œì íŠ¸",
            "ìë£Œì‹¤",
            "ë¡œì»¬ì—ì„œ ë°”ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•œ í…œí”Œë¦¿",
          ],
          [
            "í¬íŠ¸í´ë¦¬ì˜¤ ë©”ì¸ ìƒ‰ ë­ê°€ ì¢‹ì„ê¹Œ?",
            "ììœ ê²Œì‹œíŒ",
            "ë¸Œëœë”© ì»¬ëŸ¬ ì¶”ì²œ ë°›ì•„ìš”",
          ],
          ["ê°•ì˜ ë§Œì¡±ë„ ì„¤ë¬¸ ì•ˆë‚´", "ê³µì§€ì‚¬í•­", "í•™ìŠµ ê°œì„  ì„¤ë¬¸ ì°¸ì—¬ ì•ˆë‚´"],
          [
            "í”„ë¡œê·¸ë¨ ë‹¤ìš´ë¡œë“œ ëª¨ìŒ",
            "í”„ë¡œê·¸ë¨ ë‹¤ìš´ë¡œë“œ",
            "ê°œë°œíˆ´ ë‹¤ìš´ë¡œë“œ ë§í¬ ëª¨ìŒ",
          ],
          ["ê°•ì‚¬ í›„ê¸° â€“ ë°±ì—”ë“œ íŠ¸ë™", "ê°•ì‚¬ í›„ê¸°", "ì‹¤ë¬´ íŒì´ ì‹¤ë ¸ì–´ìš”"],
          ["ìˆ˜ê°• í›„ê¸° â€“ ì·¨ì—… ì„±ê³µê¸°", "ìˆ˜ê°• í›„ê¸°", "í”„ë¡œì íŠ¸ ê²½í—˜ì´ í° ë„ì›€"],
          ["íŒŒì¼ ì—…ë¡œë“œê°€ ì•ˆë¼ìš”", "Q&A", "ë©€í‹°íŒŒíŠ¸ ì„¤ì • í™•ì¸"],
          ["JPA N+1 ë¬¸ì œ ì •ë¦¬", "ìë£Œì‹¤", "í˜ì¹˜ì¡°ì¸, ì—”í‹°í‹°ê·¸ë˜í”„ë¡œ í•´ê²°"],
          [
            "ì˜¤ë¼í´ â†’ MySQL ë§ˆì´ê·¸ë ˆì´ì…˜",
            "ìë£Œì‹¤",
            "ìŠ¤í‚¤ë§ˆ/ë¬¸ë²• ì°¨ì´ ì²´í¬ë¦¬ìŠ¤íŠ¸",
          ],
          ["íšŒì›ê°€ì… UX ê°œì„  ì•„ì´ë””ì–´", "ììœ ê²Œì‹œíŒ", "í¼ ë‹¨ê³„ ì¤„ì´ê¸° ì œì•ˆ"],
        ];
        for (let i = 0; i < 38; i++) {
          const base = samples[i % samples.length];
          arr.push({
            id: i + 1,
            title: base[0] + (i > 14 ? ` #${i - 14}` : ""),
            category: base[1],
            excerpt: base[2],
            // ìµœê·¼ ê¸€ì´ ìœ„ì— ì˜¤ë„ë¡ 0~35ì¼ ì„ê¸°
            date: daysAgo(randInt(0, 35)),
            views: randInt(30, 1400),
            comments: randInt(0, 28),
            pinned: base[1] === "ê³µì§€ì‚¬í•­" && randInt(0, 10) > 7,
          });
        }
        // ê³µì§€ë§Œ ëª‡ ê°œ ë³´ì¥
        arr.push({
          id: 9991,
          title: "ìƒˆ í•™ê¸°/ëª¨ì§‘ ì¼ì • ì•ˆë‚´",
          category: "ê³µì§€ì‚¬í•­",
          excerpt: "í•™ì‚¬/ëª¨ì§‘ ì¼ì • ê³µì§€",
          date: daysAgo(3),
          views: 410,
          comments: 2,
          pinned: true,
        });
        arr.push({
          id: 9992,
          title: "ì»¤ë®¤ë‹ˆí‹° ì ê²€ ì•ˆë‚´",
          category: "ê³µì§€ì‚¬í•­",
          excerpt: "ì˜¤ëŠ˜ 23:00~23:30",
          date: daysAgo(0),
          views: 200,
          comments: 0,
          pinned: true,
        });
        return arr;
      })();

      // ---------- ìƒíƒœ ----------
      const state = {
        q: "", // ê²€ìƒ‰ì–´
        cat: "", // ì¹´í…Œê³ ë¦¬(ì‚¬ì´ë“œë°”/ì¹´ë“œ)
        tab: "ì „ì²´", // íƒ­ (ì „ì²´/ê³µì§€/Q&A/ììœ /ìë£Œì‹¤)
        page: 1, // í˜ì´ì§€
        posts: mockPosts,
      };

      // URL â†’ ìƒíƒœ ë³µì›
      function hydrateFromURL() {
        const p = new URLSearchParams(location.search);
        state.q = (p.get("q") || "").trim();
        state.cat = (p.get("cat") || "").trim();
        state.tab = (p.get("tab") || "ì „ì²´").trim();
        state.page = Math.max(1, parseInt(p.get("page") || "1", 10) || 1);
        if ($searchInput) $searchInput.value = state.q;
      }

      // ìƒíƒœ â†’ URL ë™ê¸°í™”(í˜ì´ì§€ ì´ë™/ê²€ìƒ‰ ì‹œ ì£¼ì†Œì¤„ ê°±ì‹ )
      function syncURL() {
        const p = new URLSearchParams();
        if (state.q) p.set("q", state.q);
        if (state.cat) p.set("cat", state.cat);
        if (state.tab && state.tab !== "ì „ì²´") p.set("tab", state.tab);
        if (state.page > 1) p.set("page", String(state.page));
        const qs = p.toString();
        history.replaceState(null, "", qs ? `?${qs}` : location.pathname);
      }

      // ---------- í•„í„°/ì •ë ¬/í˜ì´ì§€ ----------
      function normalize(s) {
        return (s || "").toLowerCase();
      }
      function applyFilters() {
        let data = [...state.posts];

        // íƒ­(ê³µì§€/Q&A/ììœ /ìë£Œì‹¤ â†’ íŠ¹ì • ì¹´í…Œê³ ë¦¬ì™€ ë§¤í•‘)
        const tabCat = TAB_MAP[state.tab] || null;
        if (tabCat) data = data.filter((p) => p.category === tabCat);

        // ì¹´í…Œê³ ë¦¬(ì‚¬ì´ë“œ ì„ íƒ)
        if (state.cat) data = data.filter((p) => p.category === state.cat);

        // ê²€ìƒ‰(ì œëª©/ìš”ì•½)
        if (state.q) {
          const qn = normalize(state.q);
          data = data.filter(
            (p) =>
              normalize(p.title).includes(qn) ||
              normalize(p.excerpt).includes(qn)
          );
        }

        // ì •ë ¬: ê³µì§€(ê³ ì •) ë¨¼ì €, ê·¸ ë‹¤ìŒ ìµœì‹ ìˆœ
        data.sort((a, b) => {
          if (a.pinned && !b.pinned) return -1;
          if (!a.pinned && b.pinned) return 1;
          return b.date - a.date;
        });

        return data;
      }

      function paginate(list) {
        const total = list.length;
        const totalPages = Math.max(1, Math.ceil(total / PAGE_SIZE));
        const page = Math.min(state.page, totalPages);
        const start = (page - 1) * PAGE_SIZE;
        const slice = list.slice(start, start + PAGE_SIZE);
        return { slice, total, totalPages, page };
      }

      // ---------- ë Œë” ----------
      function fmtDate(d) {
        const y = d.getFullYear(),
          m = String(d.getMonth() + 1).padStart(2, "0"),
          dd = String(d.getDate()).padStart(2, "0");
        return `${y}-${m}-${dd}`;
      }

      function renderFeed() {
        const list = applyFilters();
        const { slice, total, totalPages, page } = paginate(list);

        // ê³µì§€ ë¼ë²¨(ìƒë‹¨ notice) ìµœì‹  ê³µì§€ ë‚ ì§œë¡œ ê°±ì‹ 
        if ($notice) {
          const latestNotice = state.posts
            .filter((p) => p.category === "ê³µì§€ì‚¬í•­")
            .sort((a, b) => b.date - a.date)[0];
          if (latestNotice) {
            $notice.textContent = `ê³µì§€ì‚¬í•­ Â· ${fmtDate(latestNotice.date)}`;
          }
        }

        // í”¼ë“œ ë³¸ë¬¸
        if ($feed) {
          $feed.innerHTML =
            slice
              .map((p) => {
                const pill =
                  p.category === "Q&A"
                    ? "Q&A"
                    : p.category === "ìë£Œì‹¤"
                    ? "ìë£Œì‹¤"
                    : p.category === "ê³µì§€ì‚¬í•­"
                    ? "ê³µì§€"
                    : "ììœ ";
                return `
          <article class="post">
            <div class="headline">
              <span class="pill">${pill}</span>
              <a class="title" href="#">${escapeHtml(p.title)}</a>
              ${
                p.pinned
                  ? `<span class="pill" style="margin-left:8px;background:#fff5d1;border-color:#ffe49e;color:#7a5a00">ê³ ì •</span>`
                  : ""
              }
            </div>
            <div class="submeta">${fmtDate(p.date)} Â· ëŒ“ê¸€ ${
                  p.comments
                } Â· ì¡°íšŒ ${p.views}</div>
            <div class="excerpt" style="color:#3b4a50">${escapeHtml(
              p.excerpt
            )}</div>
          </article>
        `;
              })
              .join("") +
            `
        <div class="paginate" role="navigation" aria-label="í˜ì´ì§€ë„¤ì´ì…˜">
          ${renderPagination(page, totalPages)}
        </div>
      `;
        }

        // ì‚¬ì´ë“œë°” ì¹´ìš´íŠ¸ ê°±ì‹ (í˜„ì¬ í•„í„°/ê²€ìƒ‰ ê²°ê³¼ ê¸°ì¤€)
        updateCategoryBadges(list);

        // íƒ­ í™œì„±í™” í‘œì‹œ
        $tabs.forEach((tab) => {
          tab.classList.toggle("active", tab.textContent.trim() === state.tab);
          tab.setAttribute(
            "aria-selected",
            String(tab.classList.contains("active"))
          );
        });

        // í€µ ì¹´ë“œ(ìƒë‹¨ ì¹´í…Œê³ ë¦¬ ì¹´ë“œ)ì˜ ë©”íƒ€ë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ë¡œ ì´ë™
        bindQuickCardClicks();
      }

      function renderPagination(page, totalPages) {
        const prevDisabled =
          page <= 1 ? "aria-disabled='true' tabindex='-1'" : "";
        const nextDisabled =
          page >= totalPages ? "aria-disabled='true' tabindex='-1'" : "";
        const pages = [];
        // ë‹¨ìˆœ 1..N (Nì´ í¬ë©´ ê°œì„  ê°€ëŠ¥)
        for (let i = 1; i <= totalPages; i++) {
          pages.push(
            `<a class="page ${
              i === page ? "active" : ""
            }" data-page="${i}" href="#">${i}</a>`
          );
        }
        return `
      <a class="page" data-prev href="#" ${prevDisabled}>â€¹</a>
      ${pages.join("")}
      <a class="page" data-next href="#" ${nextDisabled}>â€º</a>
    `;
      }

      function updateCategoryBadges(currentList) {
        // í˜„ì¬ í•„í„°/ê²€ìƒ‰ì„ ì ìš©í•œ "ì „ì²´ í›„ë³´"ì—ì„œ ì¹´í…Œê³ ë¦¬ë³„ ì¹´ìš´íŠ¸ ì§‘ê³„
        const map = new Map(CATEGORIES.map((c) => [c, 0]));
        currentList.forEach((p) =>
          map.set(p.category, (map.get(p.category) || 0) + 1)
        );

        $catLinks.forEach((a) => {
          const name = (a.querySelector("span")?.textContent || "").trim();
          const badge = a.querySelector(".badge");
          if (badge) badge.textContent = map.get(name) ?? 0;
          // í™œì„± ì¹´í…Œê³ ë¦¬ í‘œì‹œ
          a.classList.toggle("active", state.cat === name);
          a.style.background = a.classList.contains("active") ? "#f6fbf8" : "";
          a.style.fontWeight = a.classList.contains("active") ? "700" : "";
          a.style.border = a.classList.contains("active")
            ? "1px solid #bfead7"
            : "1px solid transparent";
          a.style.transition = "all .15s ease";
          a.style.borderRadius = "12px";
        });
      }

      function bindQuickCardClicks() {
        // .cardsì˜ ë©”íƒ€ í…ìŠ¤íŠ¸(ì˜ˆ: "ğŸ“š ìë£Œì‹¤")ì—ì„œ ì¹´í…Œê³ ë¦¬ ì¶”ì¶œ
        $cardsQuick.forEach((meta) => {
          const txt = meta.textContent.trim();
          const cat = CATEGORIES.find((c) => txt.includes(c));
          const card = meta.closest(".card");
          if (cat && card && !card.dataset.bound) {
            card.dataset.bound = "1";
            card.style.cursor = "pointer";
            card.addEventListener("click", (e) => {
              e.preventDefault();
              state.cat = cat;
              state.tab = "ì „ì²´";
              state.page = 1;
              syncURL();
              renderFeed();
              // í¬ì»¤ìŠ¤ ì´ë™(ì ‘ê·¼ì„±)
              $feed?.scrollIntoView({ behavior: "smooth", block: "start" });
            });
          }
        });
      }

      // ---------- ì´ë²¤íŠ¸ ----------
      // ì‚¬ì´ë“œ ì¹´í…Œê³ ë¦¬ í´ë¦­
      $catLinks.forEach((a) => {
        a.addEventListener("click", (e) => {
          e.preventDefault();
          const name = (a.querySelector("span")?.textContent || "").trim();
          state.cat = state.cat === name ? "" : name; // í† ê¸€
          state.tab = "ì „ì²´";
          state.page = 1;
          syncURL();
          renderFeed();
        });
      });

      // íƒ­ í´ë¦­
      $tabs.forEach((tab) => {
        tab.addEventListener("click", (e) => {
          e.preventDefault();
          const name = tab.textContent.trim();
          state.tab = name;
          // íƒ­ì´ íŠ¹ì • ì¹´í…Œê³ ë¦¬ ë§¤í•‘ì´ë©´ ì‚¬ì´ë“œ ì¹´í…Œê³ ë¦¬ í•´ì œ
          if (TAB_MAP[name]) state.cat = "";
          state.page = 1;
          syncURL();
          renderFeed();
        });
      });

      // ê²€ìƒ‰
      function doSearch() {
        state.q = ($searchInput?.value || "").trim();
        state.page = 1;
        syncURL();
        renderFeed();
      }
      $searchBtn?.addEventListener("click", (e) => {
        e.preventDefault();
        doSearch();
      });
      $searchInput?.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          doSearch();
        }
      });

      // í˜ì´ì§€ë„¤ì´ì…˜(ì´ë²¤íŠ¸ ìœ„ì„)
      $feed?.addEventListener("click", (e) => {
        const a = e.target.closest("a.page");
        if (!a) return;
        e.preventDefault();
        if (a.hasAttribute("data-prev")) {
          if (state.page > 1) {
            state.page--;
          }
        } else if (a.hasAttribute("data-next")) {
          const list = applyFilters();
          const totalPages = Math.max(1, Math.ceil(list.length / PAGE_SIZE));
          if (state.page < totalPages) {
            state.page++;
          }
        } else {
          const p = parseInt(a.dataset.page || "1", 10) || 1;
          state.page = p;
        }
        syncURL();
        renderFeed();
        // í¬ì»¤ìŠ¤ ìœ ì§€
        a.blur();
      });

      // ê¸€ì“°ê¸°(ë°ëª¨ìš©): ê°„ë‹¨íˆ ëª¨í‚¹ ì¶”ê°€ â†’ ìµœìƒë‹¨ì— ë°˜ì˜
      $writeBtn?.addEventListener("click", () => {
        const title = prompt("ê¸€ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”:");
        if (!title) return;
        const category = state.cat || TAB_MAP[state.tab] || "ììœ ê²Œì‹œíŒ";
        state.posts.unshift({
          id: Date.now(),
          title,
          category,
          excerpt: "ì‚¬ìš©ì ì‘ì„± ê¸€(ë°ëª¨)",
          date: new Date(),
          views: 0,
          comments: 0,
          pinned: false,
        });
        state.page = 1;
        syncURL();
        renderFeed();
      });

      // ---------- ìœ í‹¸ ----------
      function escapeHtml(s) {
        return String(s).replace(
          /[&<>"']/g,
          (m) =>
            ({
              "&": "&amp;",
              "<": "&lt;",
              ">": "&gt;",
              '"': "&quot;",
              "'": "&#39;",
            }[m])
        );
      }

      // ---------- ì´ˆê¸°í™” ----------
      hydrateFromURL();
      renderFeed();
    });
  </script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      fetch("/menu.html")
        .then((res) => res.text())
        .then((html) => {
          document.querySelector(".upmenu").innerHTML = html;
        })
        .catch((err) => console.error("ë©”ë‰´ ë¡œë“œ ì‹¤íŒ¨:", err));
    });
  </script>
  <script>
    // ë©”ë‰´ í”„ë˜ê·¸ë¨¼íŠ¸ ë¡œë” (ìƒëŒ€ê²½ë¡œ ì•ˆì „)
    document.addEventListener("DOMContentLoaded", async () => {
      const target = document.querySelector(".upmenu");
      if (!target) return;

      // â‘  í˜„ì¬ í˜ì´ì§€ ê¸°ì¤€ ìƒëŒ€ê²½ë¡œ ì‚¬ìš©
      const url = new URL("./menu.html", window.location.href);

      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const html = await res.text();
        target.innerHTML = html;

        // (ì„ íƒ) menu.html ë‚´ë¶€ì— <script>ê°€ ìˆë‹¤ë©´ ì‹¤í–‰ë˜ë„ë¡ ì²˜ë¦¬
        target.querySelectorAll("script").forEach((old) => {
          const s = document.createElement("script");
          if (old.src) {
            s.src = old.src;
          } else {
            s.textContent = old.textContent;
          }
          document.body.appendChild(s);
          old.remove();
        });
      } catch (err) {
        console.error("ë©”ë‰´ ë¡œë“œ ì‹¤íŒ¨:", err);
        target.innerHTML = `
        <div style="padding:8px 12px; background:#fee; color:#900; border-radius:8px;">
          ë©”ë‰´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. (<code>${url.pathname}</code>)
        </div>`;
      }
    });
  </script>
</html>
